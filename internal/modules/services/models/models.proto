syntax = "proto3";
package models;   

import "google/protobuf/descriptor.proto";


option go_package = "github.com/rangertaha/hxe/internal/modules/models;models";

enum StatusCode {
  OK = 0;
  NOT_FOUND = 1;
  INVALID_REQUEST = 2;
  INTERNAL_SERVER_ERROR = 3;
  UNAUTHORIZED = 4;
  FORBIDDEN = 5;
  CONFLICT = 6;
  BAD_REQUEST = 7;
  UNPROCESSABLE_ENTITY = 8;
  TOO_MANY_REQUESTS = 9;
  SERVICE_UNAVAILABLE = 10;
}

// ServiceStatus as enum
enum ServiceStatus {
  READY = 0;
  LOADING = 1;
  STARTING = 2;
  RESTARTING = 3;
  RUNNING = 4;
  STOPPING = 5;
  STOPPED = 6;
  FAILED = 7;
  SUCCESS = 8;
  UNKNOWN = 9;
}

message App {
  uint32 id = 1;
  string name = 2;
  string title = 3;
  string desc = 4;
  repeated Tag tags = 5;
}

message Apps {
  repeated App apps = 1;
}

message Tag {
  string key = 1;
  string value = 2;
}

message Tags {
  repeated Tag tags = 1;
}


message Action {
  string icon = 1;
  string name = 2;
  string label = 3;
  string tooltip = 4;
  repeated Tag tags = 5;
}

message Actions {
  repeated Action actions = 1;
}

message Category {
  uint32 id = 1;
  string name = 2;
  string title = 3;
  string desc = 4;
  repeated Tag tags = 5;
  repeated Service services = 6;
}

message Categories {
  repeated Category categories = 1;
}

message Service {
  uint32 id = 1;
  string name = 2;
  string description = 3;
  string user = 4;
  string group = 5;
  string directory = 6;
  string pre_exec = 7;
  string cmd_exec = 8;
  string post_exec = 9;
  bool autostart = 10;
  int32 retries = 11;
  bool enabled = 12;
  int32 pid = 13;
  int32 exit = 14;
  int64 started = 15;
  int64 ended = 16;
  int64 uptime = 17;
  ServiceStatus status = 18;
  map<string, double> metrics = 19;
  uint64 category_id = 20;
  Category category = 21;
  uint64 app_id = 22;
  App app = 23; // Define App message if needed
  repeated Tag tags = 24; 
  repeated Action actions = 25;
}


message Request {
  Service service = 1;
}

message Response {
  Service service = 1;
  repeated Service services = 2;
  StatusCode status = 3;
}

